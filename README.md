# 校园表白墙部署版

## 项目概述

校园表白墙是一个支持图片和视频上传的表白墙应用，包含用户前台和管理员后台两部分。数据使用浏览器本地存储进行保存。

## 系统要求

- Windows 操作系统
- Node.js (推荐最新版本)
- 现代浏览器 (Chrome, Firefox, Edge, Safari)

## 目录结构

```
表白墙部署/
├── 用户前台/
│   ├── index.html          # 用户前台页面
│   └── 使用说明.txt         # 用户前台使用说明
├── 管理员后台/
│   ├── index.html          # 管理员后台页面
│   └── 使用说明.txt         # 管理员后台使用说明
├── 启动用户前台.bat         # 启动用户前台服务
├── 启动管理员后台.bat       # 启动管理员后台服务
├── 一键启动所有服务.bat      # 同时启动前台和后台
├── 检查服务状态.bat         # 检查服务运行状态
├── README.md               # 本说明文档
└── 部署说明.txt             # 简单部署说明
```

## 快速开始

### 方法一：本地访问（仅本机使用）

1. **双击运行 `一键启动所有服务.bat`**
2. **等待服务启动**（脚本会自动检查端口可用性）
3. **浏览器将自动打开两个页面**：
   - 用户前台：http://localhost:8000 或 http://localhost:8080
   - 管理员后台：http://localhost:8001 或 http://localhost:8081

### 方法二：网络访问（局域网/互联网）

1. **双击运行 `一键启动网络版.bat`**（推荐）
2. **等待网络配置和服务启动**
3. **浏览器将自动打开两个页面**
4. **控制台会显示所有访问地址**：
   - 本地地址：http://localhost:8000
   - 局域网地址：http://[你的IP]:8000
   - 外网地址：http://[公网IP]:8000（需要路由器配置）

### 方法三：网络问题诊断

1. **运行 `网络诊断工具.bat`**
2. 选择选项进行网络配置和诊断
3. 查看 `网络部署指南.md` 获取详细说明

### 方法二：单独启动

1. **启动用户前台**：
   - 双击运行 `启动用户前台.bat`
   - 访问 http://localhost:8000

2. **启动管理员后台**：
   - 双击运行 `启动管理员后台.bat`
   - 访问 http://localhost:8001

### 方法三：检查服务状态

1. **双击运行 `检查服务状态.bat`**
2. **查看服务运行情况**
3. **选择需要的功能**：
   - 打开前台/后台页面
   - 启动未运行的服务

## 访问地址和端口

### 用户前台
- **主地址**：http://localhost:8000
- **备用地址**：http://localhost:8080（当8000端口被占用时）

### 管理员后台
- **主地址**：http://localhost:8001
- **备用地址**：http://localhost:8081（当8001端口被占用时）

## 默认登录信息

- **用户名**：admin
- **密码**：123456

> 提示：首次登录后请及时修改密码（在本地环境中，可自行修改代码中的密码）

## 功能介绍

### 用户前台

- **发布表白**：支持文字、图片和视频内容
- **查看表白**：浏览所有已发布的表白
- **过滤表白**：按类型筛选表白（爱情、友情、欣赏、感谢）
- **媒体预览**：点击图片/视频可查看大图或播放
- **相册功能**：支持多个媒体文件的相册浏览

### 管理员后台

- **数据统计**：展示总表白数、各类型表白数、总点赞数等
- **数据管理**：查看、搜索和删除表白内容
- **系统信息**：显示当前登录信息和浏览器环境
- **数据导出**：将表白数据导出为JSON文件
- **清空数据**：一键清空所有表白数据

## 技术特点

- **单页面应用**：无需额外依赖，开箱即用
- **自动端口检测**：当主端口被占用时自动切换到备用端口
- **增强的服务器**：支持CORS头，更好的跨域支持
- **响应式设计**：支持PC和移动设备访问
- **本地存储**：数据保存在浏览器本地，无需服务器
- **多媒体支持**：支持常见图片和视频格式
- **实时预览**：上传后即时预览，提升用户体验

## 上传限制

- **最大文件大小**：50MB
- **支持图片格式**：JPG, PNG, GIF
- **支持视频格式**：MP4, WebM, AVI, MOV, OGG等
- **最多上传文件数**：单次最多5个文件

## 常见问题

### Q: 为什么无法上传文件？
A: 请检查文件格式是否受支持，文件大小是否超过50MB。

### Q: 为什么页面显示纯文字？
A: 可能是服务器没有正确启动，请使用提供的启动脚本或使用现代浏览器打开。

### Q: 端口被占用怎么办？
A: 启动脚本会自动检测端口占用，并尝试使用备用端口。

### Q: 如何检查服务是否正常运行？
A: 使用 `检查服务状态.bat` 脚本查看所有服务的运行情况。

### Q: 数据存储在哪里？
A: 所有数据存储在浏览器的localStorage中，清除浏览器数据会导致数据丢失。

### Q: 如何备份数据？
A: 在管理员后台点击"导出数据"按钮，可将数据导出为JSON文件。

### Q: 如何修改登录密码？
A: 在部署版的`管理员后台/index.html`中，搜索`adminCredentials`对象，修改其中的用户名和密码。

## 部署说明

1. 将整个`表白墙部署`文件夹复制到目标服务器
2. 确保服务器已安装Node.js
3. 使用提供的启动脚本启动服务
4. 可根据需要修改端口设置

## 服务管理

### 启动脚本功能
- **启动用户前台.bat**：仅启动用户前台服务（端口8000/8080）
- **启动管理员后台.bat**：仅启动管理员后台服务（端口8001/8081）
- **一键启动所有服务.bat**：同时启动前台和后台，并自动打开浏览器
- **检查服务状态.bat**：检查服务状态，提供管理选项

### 端口冲突处理
- 脚本会自动检测端口是否被占用
- 如果主端口被占用，会自动尝试使用备用端口
- 启动时会显示实际使用的端口

## 技术支持

如有问题或需要技术支持，请提供以下信息：

- 操作系统版本
- 浏览器版本
- Node.js版本
- 错误信息截图
- 具体操作步骤

---

**版本**：v3.0  
**更新时间**：2025年11月  
**开发者**：表白墙项目组

## 更新日志

### v3.0 (2025-11)
- 添加端口冲突自动检测和备用端口机制
- 增强服务器脚本，添加CORS支持
- 新增服务状态检查工具
- 优化启动脚本界面和提示信息
- 添加一键启动功能

### v2.0 (2025-11)
- 分离用户前台和管理员后台
- 添加独立启动脚本
- 完善文档和说明

### v1.0 (2025-10)
- 初始版本
- 基本表白墙功能